{
  "id": "add-all-stories-endpoint",
  "subject": "Add API endpoint returning all stories with epic names",
  "description": "## Goal\nAdd support for `GET /api/stories?all=true` in the Express server that returns **all** stories (both standalone and epic-owned) with the parent epic name resolved.\n\n## Implementation\n\n### Server-side (`src/server/routes.ts` + `src/server/parser.ts`)\n1. In `parser.ts`, add a function (or extend existing) that:\n   - Scans all story directories in `.saga/stories/`\n   - For stories with an `epic` field, looks up the epic in `.saga/epics/<epicId>/epic.json` to resolve the epic title\n   - Returns `StoryDetail[]` with an additional `epicName?: string` field\n2. In `routes.ts`, modify the `GET /api/stories` handler:\n   - If `req.query.all === 'true'`, return all stories (standalone + epic-owned) with `epicName` resolved\n   - If no `all` param, keep existing behavior (standalone stories only)\n\n### Type Update (`src/client/src/types/dashboard.ts`)\n- Add `epicName?: string` to `StoryDetail` interface\n\n## Testing\nWrite tests for the new parser function and the modified route handler. Test:\n- Returns standalone stories\n- Returns epic-owned stories with `epicName` populated\n- Existing `GET /api/stories` (without `?all=true`) still returns only standalone stories\n- Handles missing epic gracefully (epicName is undefined if epic JSON not found)",
  "activeForm": "Adding all-stories API endpoint",
  "status": "completed",
  "blockedBy": [],
  "guidance": "Look at the existing `getStories()` and `getEpics()` functions in parser.ts. The epic JSON files contain `title` â€” use that for epicName resolution. Check how routes.ts currently handles query params.",
  "doneWhen": "GET /api/stories?all=true returns all stories with epicName resolved. Existing GET /api/stories behavior unchanged. Tests pass."
}